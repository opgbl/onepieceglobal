async function load(){await ensureTurnstile();const p=new URLSearchParams(location.search);const id=p.get("id");const r=await fetch(API_URL+"/api/episodes/"+id,{credentials:"include"});const title=document.getElementById("title");if(!r.ok){title.textContent="No encontrado";return}const ep=await r.json();title.textContent="Episodio "+(ep.episodio??id)+": "+(ep.titulo||"");const dls=document.getElementById("dls");["dl1080","dl720","dl480"].forEach(k=>{if(ep[k]){const a=document.createElement("a");a.className="btn";a.textContent="Descargar "+k.replace("dl","")+"p";a.href=ep[k];dls.appendChild(a)}});const box=document.getElementById("embedBox");box.textContent="";if(ep.embed){const iframe=document.createElement("iframe");iframe.width="100%";iframe.height="360";iframe.src=ep.embed;iframe.allow="autoplay; fullscreen; picture-in-picture";iframe.frameBorder="0";box.appendChild(iframe)}}
document.addEventListener("DOMContentLoaded",load);
